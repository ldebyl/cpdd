SYNDIR(1)                         User Commands                        SYNDIR(1)

NAME
       syndir - generate test directory structures with configurable file
       duplication

SYNOPSIS
       syndir [OPTIONS] REF_ROOT SRC_ROOT

DESCRIPTION
       syndir is a test data generator designed to create realistic file
       structures for testing content-based deduplication tools like cpdd(1).
       It creates two directory trees: a reference directory with randomly
       generated files, and a source directory where a configurable percentage
       of files have identical content to reference files but different names
       and locations.

       syndir uses realistic file size distributions and supports advanced size
       control for testing various scenarios from small document collections to
       large media files.

OPTIONS
       -f, --files COUNT
              Generate COUNT files in total (default: 100). Files are
              distributed between reference and source directories.

       -d, --dirs COUNT
              Create COUNT directories in each tree (default: 10). Use 0 for
              flat directory structure.

       -p, --percent PCT
              Percentage of source files that duplicate reference content
              (0-100, default: 30). Higher values create more deduplication
              opportunities.

       --size-p50 SIZE
              50th percentile file size in bytes (default: 4096). Half of
              generated files will be smaller than this size.

       --size-p95 SIZE
              95th percentile file size in bytes (default: 65536). 95% of
              generated files will be smaller than this size.

       --size-max SIZE
              Maximum file size in bytes (default: 1048576). No files will
              exceed this size.

       --size-scale FACTOR
              Scale all file sizes by this factor (default: 1.0). Use values >
              1.0 for larger files, < 1.0 for smaller files.

       -v, --verbose
              Show verbose output during generation, including files being
              created and their sizes.

       -h, --help
              Display help message and exit.

EXAMPLES
       Basic test data generation:
              syndir /tmp/ref /tmp/src

       High duplication scenario:
              syndir -f 200 -d 20 -p 80 /tmp/ref /tmp/src

       Large test set with verbose output:
              syndir -v -f 1000 -d 50 -p 60 /tmp/ref /tmp/src

       Small files (document-like):
              syndir --size-p50 1024 --size-p95 8192 --size-max 32768 /tmp/ref
              /tmp/src

       Large files (media-like):
              syndir --size-scale 1000 -f 50 /tmp/ref /tmp/src

       Complete testing workflow:
              syndir -v -f 500 -p 50 /tmp/ref /tmp/src
              cpdd -r /tmp/ref -v --stats /tmp/src /tmp/dest
              du -sh /tmp/ref /tmp/src /tmp/dest

FILE SIZE DISTRIBUTION
       syndir generates files with realistic size distributions using
       percentile-based parameters:

       •   50% of files are smaller than --size-p50

       •   95% of files are smaller than --size-p95

       •   All files are smaller than --size-max

       •   The --size-scale factor multiplies all sizes uniformly

           This approach creates natural distributions similar to real-world
           file collections.

DUPLICATION STRATEGY
       For source files designated as duplicates (based on --percent):

       1.  A reference file is randomly selected

       2.  Content is copied exactly but with a different filename

       3.  File is placed in a different directory location

       4.  This creates perfect deduplication candidates for testing

           Non-duplicate files contain unique random content generated from a
           pseudorandom source.

EXIT STATUS
       syndir exits with status 0 on success, 1 on error.

FILES
       No configuration files are used. All generated content is pseudorandom.

NOTES
       Generated directories should be cleaned up after testing:

           rm -rf /tmp/ref /tmp/src /tmp/dest

       The size percentile parameters must be in ascending order: p50 ≤ p95 ≤
       max.

       For testing scenarios, typical duplication percentages range from 20%
       (conservative) to 80% (aggressive deduplication scenarios).

EXAMPLES DIRECTORY
       The syndir distribution includes example scripts:

       examples/demo.sh
              Complete demonstration of syndir and cpdd working together

       examples/usage.sh
              Interactive testing scenarios

BUGS
       Report bugs at: https://github.com/32kb-net/cpdd/issues

AUTHOR
       Written by Lee de Byl <lee@32kb.net>.

COPYRIGHT
       Copyright © 2025 Lee de Byl. Licensed under the MIT License.  This is
       free software: you are free to change and redistribute it.  There is NO
       WARRANTY, to the extent permitted by law.

SEE ALSO
       cpdd(1), cp(1), find(1), du(1), ls(1)

syndir                                2025                             SYNDIR(1)
